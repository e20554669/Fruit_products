{
    // VS Code 側邊欄顯示的名稱
    "name": "Demo Python Project with Poetry", 

    "build": {
        "dockerfile": "Dockerfile",
        "context": ".." // 告訴 Docker 從專案根目錄開始尋找 pyproject.toml
    },
    
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.black-formatter", 
                "ms-python.isort",          
                "streetsidesoftware.code-spell-checker",
                "donjayamanne.githistory",
                "eamodio.gitlens",
                "mhutchie.git-graph",
                "shardulm94.trailing-spaces",
                "vivaxy.vscode-conventional-commits",
                "bierner.markdown-mermaid",
                "bungcip.better-toml" 
            ],
            
            "settings": {
                // 終端機設定
                "terminal.integrated.defaultProfile.linux": "zsh",
                
                // 程式碼風格設定
                "editor.defaultFormatter": "ms-python.black-formatter",
                "editor.tabSize": 4,
                "editor.rulers": [100],
                
                // *** Poetry 整合與 Python 解釋器設定 (關鍵部分) ***
                "python.defaultInterpreterPath": "/usr/local/bin/python", 
                "python.languageServer": "Pylance",
                "python.testing.pytestEnabled": true,
                
                // 告訴 Pylance 尋找 Poetry 建立的虛擬環境
		"python.analysis.extraPaths": [
		"${workspaceFolder}/.venv/lib/python3.12/site-packages"
		]
            }
        }
    },
    
    // 將 SSH 和 Git config 掛載到容器
    //"mounts": [
    //    "source=${localEnv:HOME}${localEnv:USERPROFILE}/.ssh,target=/root/.ssh_mounted,type=bind,consistency=cached",
    //    "source=${localEnv:HOME}${localEnv:USERPROFILE}/.gitconfig,target=/root/.gitconfig_mounted,type=bind,consistency=cached"
    //],
    
    // 設定 PYTHONPATH 環境變數
    "remoteEnv": {
        "PYTHONPATH": "/workspaces/demo-devcontainer/src"
    },

    // 容器創建後執行的指令 (使用 Array 語法，確保 Shell 執行穩定)
    "postCreateCommand": [
        "sh", 
        "./.devcontainer/postCreateCommand.sh"
    ],
    
    // Docker 運行參數
    "runArgs": [
        "--name",
        "teamproject",
        "--network",
        "host"
    ],
    
    "remoteUser": "root" 
}
